<script src="2019-02-09-visualising-models-in-3d-with-plotly-and-nse-functions_files/htmlwidgets/htmlwidgets.js"></script>
<script src="2019-02-09-visualising-models-in-3d-with-plotly-and-nse-functions_files/plotly-binding/plotly.js"></script>
<script src="2019-02-09-visualising-models-in-3d-with-plotly-and-nse-functions_files/typedarray/typedarray.min.js"></script>
<script src="2019-02-09-visualising-models-in-3d-with-plotly-and-nse-functions_files/jquery/jquery.min.js"></script>
<link href="2019-02-09-visualising-models-in-3d-with-plotly-and-nse-functions_files/crosstalk/css/crosstalk.css" rel="stylesheet" />
<script src="2019-02-09-visualising-models-in-3d-with-plotly-and-nse-functions_files/crosstalk/js/crosstalk.min.js"></script>
<link href="2019-02-09-visualising-models-in-3d-with-plotly-and-nse-functions_files/plotly-htmlwidgets-css/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="2019-02-09-visualising-models-in-3d-with-plotly-and-nse-functions_files/plotly-main/plotly-latest.min.js"></script>


<p>One of the areas I’m planning to improve on is visualisation. Ultimately, this means D3, but in the meantime I wrote a fairly useful function for showing the fit of a model with two inputs, along with the data, using plotly. First, load the necessary libraries:</p>
<pre class="r"><code>library(plotly)
library(randomForest)
library(rlang)
library(dplyr)
library(magrittr)</code></pre>
<p>(you could actually write thing function without rlang or magrittr, but it’s just a bit neater with them.) Here’s the function:</p>
<pre class="r"><code>plot_3d &lt;- function(df, x, y, z) {
  
  x &lt;- enquo(x)
  y &lt;- enquo(y)
  z &lt;- enquo(z) 
  
  # build a model 
  m &lt;- randomForest(expr(!!get_expr(x) ~ !!get_expr(y) + !!get_expr(z)) %&gt;% as.formula, df)
  
  # add the predictions to df
  df %&lt;&gt;% mutate(preds = predict(m, newdata = df ))
  
  plot_ly(df) %&gt;%
    add_trace(x = x, y = y, z = z, 
                opacity = 0.7,
                type = &quot;scatter3d&quot;, 
                mode = &quot;markers&quot;,
                colors = c(&quot;grey&quot;, &quot;blue&quot;),
                name = &quot;true values&quot;,
                size = 10
              ) %&gt;%
    add_trace(x = ~preds, y = y, z = z,
                opacity = 0.7,
                type = &quot;scatter3d&quot;, 
                mode = &quot;markers&quot;,
                name = &quot;modelled values&quot;,
                size = 10
                ) %&gt;%
    layout(scene = list(xaxis = list(title = quo_text(x)),
                        yaxis = list(title = quo_text(y)),
                        zaxis = list(title = quo_text(z))
    )
    )
  
}

economics %&gt;% plot_3d(pce, psavert, uempmed)</code></pre>
<p><div id="htmlwidget-c507937c6f7cded2f073" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-c507937c6f7cded2f073">{"x":{"visdat":{"2de85f07fe56":["function () ","plotlyVisDat"]},"cur_data":"2de85f07fe56","attrs":{"2de85f07fe56":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"z":{},"opacity":0.7,"type":"scatter3d","mode":"markers","colors":["grey","blue"],"name":"true values","size":10,"inherit":true},"2de85f07fe56.1":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"z":{},"opacity":0.7,"type":"scatter3d","mode":"markers","name":"modelled values","size":10,"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"scene":{"xaxis":{"title":"pce"},"yaxis":{"title":"psavert"},"zaxis":{"title":"uempmed"}},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"x":[507.4,510.5,516.3,512.9,518.1,525.8,531.5,534.2,544.9,544.6,550.4,556.8,563.8,567.6,568.8,572.3,577.4,577.2,584.2,589.5,589.7,594.7,601.1,601.7,603.5,610.8,614.1,619.4,621.4,623.7,629.6,634.9,633.2,637,643.4,647.2,649.5,653.9,660.1,659.3,657.6,666.6,677.2,680.4,683,689.8,692.2,700.8,699.9,706,714.1,716.9,722.1,729.6,732.6,737.3,750.4,753.8,759.2,762.9,771.2,777.7,782.5,796.3,801.8,807.5,817.9,827.2,834.2,837.2,843.1,845.8,855.7,854.9,870.9,869.8,878.6,878.4,886.4,891.6,903.3,912.7,924.3,929.9,939.8,956.6,956.8,961,958,963.6,977.4,991.3,992.6,997.2,1021.2,1029.1,1042.2,1049.4,1057.2,1063.2,1078,1094.4,1109.5,1110.1,1117.3,1127.8,1125.1,1142.9,1152.1,1160.5,1171.4,1179.5,1191.7,1214.1,1217.4,1233.7,1240.7,1249.7,1259.6,1266.3,1283.2,1288.5,1297.4,1314.3,1330,1339.3,1333,1358.9,1381.4,1400.2,1415.9,1429.8,1430.8,1451,1456.9,1471,1484.7,1500.5,1506.3,1521.6,1535,1542.3,1562.7,1579.6,1590.1,1619.7,1638.1,1646,1661.7,1670.7,1701.6,1705.6,1712.4,1699.5,1704.3,1723,1751.2,1767.7,1784.1,1820.4,1830.2,1855.5,1874.7,1889.4,1908.1,1909.1,1918.2,1938.5,1945.7,1969.8,1968.2,1966.2,1972.4,1989.9,1997.4,2021.4,2024.4,2027.2,2045.9,2050.2,2075.1,2083.7,2108.9,2130.7,2154.7,2167.4,2180.1,2183.1,2208.6,2231.8,2251,2280.8,2309,2324.8,2339.1,2361.8,2370.4,2397.9,2423.8,2408.1,2436.4,2462.6,2479.8,2501.2,2500.5,2518.4,2540.3,2538.2,2578.6,2590,2626.3,2648.6,2656.8,2668.4,2705.9,2699.3,2725.9,2762.7,2805.6,2767.1,2782.7,2822.8,2838.3,2831.2,2834.7,2846.5,2869,2873.5,2893.4,2911.1,2984.6,2945.9,2941.7,3010.8,2949.9,3016.5,3028.4,3054.1,3063.9,3088.4,3110.7,3147,3142.9,3151.1,3160.9,3190.9,3230.7,3238.5,3277.8,3280.4,3311,3335.6,3359.3,3384.3,3391.4,3430.4,3447,3476.3,3499.9,3503.9,3514.5,3558.6,3567.5,3582.4,3601.7,3636.8,3638.1,3650,3659.7,3700.7,3747.2,3744.8,3771.5,3786.7,3792.5,3821.3,3838.5,3865,3886.7,3887.1,3888.4,3877.8,3857.6,3883.3,3929.7,3923.9,3950,3957.1,3982.4,3985.4,4001.2,3992.9,4020.6,4037.7,4101.9,4116.8,4134.3,4149,4176.1,4195,4223,4239.3,4273.9,4303.5,4319.5,4355.6,4359.7,4374.3,4371.4,4412.4,4441.3,4458.8,4487.7,4499.9,4530.5,4552,4573.4,4590.7,4604.8,4652.3,4665.4,4690.7,4689.2,4728.8,4740.8,4783,4795.5,4833.3,4846,4862.3,4871.9,4871.7,4906.5,4911.5,4954.4,4999,4991.8,5027.1,5042.5,5035.9,5077.8,5120.1,5108.9,5156.1,5196.4,5231.6,5247.2,5253.7,5275.8,5299,5320,5351.5,5375,5401.7,5434.9,5457.7,5477.6,5482.8,5484.3,5518.2,5573,5611.8,5625.6,5661.2,5685.2,5716.4,5714.4,5748.4,5775,5812.9,5863.3,5897.2,5915.6,5951,5991.8,6025.8,6042.7,6098.2,6099.1,6128.2,6159.7,6223.6,6253.4,6281.9,6309.5,6354.8,6407.4,6431.2,6467.2,6568.2,6564.7,6648.7,6714.8,6701,6737.2,6773.6,6793.7,6828.7,6913.1,6919.6,6934.5,6979.1,7009.8,7029.3,7022.1,7036.2,7083.1,7097.1,7109.2,7146.1,7054.8,7250.2,7209.6,7190,7217.7,7259.7,7276.7,7345.6,7321.8,7366.1,7424.2,7449,7426.1,7469.3,7499.8,7552.6,7579.5,7573.6,7627.5,7661.7,7669.2,7722.9,7783.8,7878.9,7874,7890.6,7950.4,7974.3,8037.3,8072.1,8121,8141.6,8212.9,8204.6,8270.7,8294.4,8373,8417.9,8458.4,8516.5,8521.2,8575.7,8622.5,8715.9,8680.6,8775.3,8867.9,8872.6,8923.6,8959.6,8987.7,9026.8,9100.1,9134.7,9168.1,9223.3,9254.1,9283.8,9360.4,9368.6,9393.9,9413.3,9431.2,9516.5,9553.1,9590.8,9631.6,9670.6,9708.9,9723.3,9759.6,9800.6,9837.5,9853.9,9928.6,9947.6,9963.2,9955.7,10004.2,10044.6,10093.3,10149.4,10151.1,10140.3,10083.2,9983.3,9851.2,9744.2,9792.1,9775.7,9742.9,9741.9,9759.7,9807.6,9835.2,9961.9,9875.4,9924.6,9946.1,10000.6,10003.4,10034.7,10095.5,10106.9,10140.2,10165.9,10184.3,10247.1,10268.9,10343.7,10399.8,10436.1,10474.7,10512.4,10583.5,10624.6,10653.1,10676.4,10727.1,10745.6,10790.6,10827.6,10828.7,10827.3,10905.5,10979.2,10994.3,11030.2,11029,11032.5,11074.8,11104.8,11179.6,11199.9,11222.8,11245.2,11303.2,11371.4,11378.8,11373.3,11407.1,11462.4,11484.7,11511.6,11559.6,11602.1,11671.5,11686.3,11663.9,11714.4,11807.1,11825.2,11864.3,11922.6,11944.4,12017,12044.6,12096.4,12142.2,12122,12080.8,12095.9,12161.5,12158.9],"y":[12.5,12.5,11.7,12.5,12.5,12.1,11.7,12.2,11.6,12.2,12,11.6,10.6,10.4,10.4,10.6,10.4,10.9,10,9.4,9.9,9.5,10,10.9,11.7,11.5,11.5,11.3,11.5,11.7,11.7,11.6,12.3,13.3,12.3,11.7,13.2,13.1,12.9,13,13.3,12.9,13.1,13.1,13.3,13,13.4,14.4,13.6,13.6,12.9,13,12.8,12.9,12.4,12.6,11.5,11.3,11.5,11.4,11.4,11.8,12,12.7,13.4,13.4,12.1,12.2,12.4,12.8,12.8,13.2,12.8,13.6,12.8,14,14,14.4,14,13.8,13,12.7,12.3,12.5,12.7,11.6,12.3,13,13.4,13.6,12.8,12.1,12.3,13.9,17,13.9,12.3,12.6,12.6,13,12.3,11.5,11.3,11.9,11.8,11.2,11.8,10.9,11.2,11.2,10.8,10.6,10.9,9.9,9.8,8.5,9.8,9.9,9.8,10.2,10.1,10.5,10.7,10.7,10.8,11,11.4,10.7,10.5,10.3,9.8,9.5,10.3,9.9,10,10.2,10,10,10.6,10.5,10.7,10.4,9.8,9.3,10,9.2,8.9,9.3,9.4,9.8,9.6,9.8,9.8,10.5,10.6,10.4,10.5,10.6,11.1,11,11.5,11.2,10.5,10.4,10.3,10.3,10.4,10.2,11.7,11.4,11.9,12.5,12.7,12,12.2,11.6,11.7,12.4,11.7,11.6,12,11.9,11.1,10.7,10.3,10.3,10.4,10.5,10,9.6,9.4,8.5,9,8.7,9,9.1,9.7,9.5,9.4,11.1,10.9,10.9,10.5,10.5,11,11.2,11.2,11.2,10.3,10.6,9.7,8.5,8.1,9.4,10.5,9,8.5,7.5,6.7,8.5,8.4,8,8,8.7,9.3,9.1,8.6,8.8,8.7,8.4,6.6,7.8,8.2,6.4,9.1,7.9,7.9,3.8,7.5,7,6.8,6.5,7,7.6,7.9,8,7.5,7.9,7.5,8.1,7.7,7.8,7.9,7.8,8.2,8,7.7,7.7,8,8.4,8.9,7.9,7.6,7.6,7.7,7.1,7.5,7.9,8,7.2,7.4,8.1,7.8,8.2,8,7.9,8,7.5,7.5,7.3,7.4,8.2,8.7,8.3,7.4,8,7.7,8.2,7.6,7.9,8.1,8.6,8.4,9.1,8.8,9.2,9.2,9.4,9.4,9.5,9.1,9.2,8.2,7.4,7.3,9.9,8.3,8.4,8.3,8.2,7.7,7.2,7,7.1,6.3,5.6,5.6,8.4,6.4,5.9,6.2,5.8,7.1,6.3,6.4,5.9,6.2,6.5,6.4,6.5,6.9,7.3,7,6.3,6.5,6.1,6.4,6.1,6.1,6.5,6,5.5,6.1,6.1,6,5,6.1,6.5,6.1,5.9,6,5.8,5.8,5.7,5.6,5.7,5.8,5.9,6.2,6,5.5,5.4,5.6,5.6,5.8,5.8,6.7,6.8,6.9,6.6,6.3,6.2,6.3,6.2,5.8,5.6,5.7,5.2,5.7,5.6,5.3,4.5,4.3,4.2,4.1,4,3.5,3.9,4.1,3.7,4.7,4.2,3.9,4.4,4.2,4.2,4.6,4.6,3.8,4,3.8,3.5,4,4.1,4.5,4.3,3.7,3.7,5,6.1,6.3,2.7,3.4,3.8,5.6,5.3,5.3,5.1,5.6,5.4,4.6,4.4,4.9,4.7,4.7,4.5,4.5,4.7,4.6,4.6,5.1,4.9,5.5,5.3,4.5,4.6,4.7,4.8,4.5,4.5,4.5,4.7,4.7,5,4.5,4.6,3.9,3.8,3.4,6.3,2.9,2.7,2.7,2.1,3,2.2,1.9,2.4,2.3,2.6,2.7,2.8,3.7,3.8,3.7,3.4,3.2,3.4,2.9,3,3,3.1,3.2,3,3,3.3,3.6,3.2,3,2.8,2.8,2.6,2.8,2.8,2.5,3,3.4,3.9,4,3.5,7.9,5.6,4.4,3.7,4.4,5.4,6.3,6.5,6.5,5.9,6.1,6.7,8.1,6.7,6,4.9,5.9,5.4,5.7,5.7,5.6,5.2,5,5.6,6,5.9,5.9,5.8,5.6,5.4,5.3,5.9,6.2,6.4,6,5.9,5.9,6.1,6.3,6.2,5.7,5.5,5.6,6.4,6.6,6.7,6.9,7,7,7.1,6.6,6.4,6.5,7.1,8.2,10.5,4.5,4.7,4.9,5.1,5.2,5.3,5.1,5.3,5.2,4.7,4.3,4.1,4.9,5,4.8,5,5.1,5.1,5.1,4.7,4.6,4.6,4.5,5,5.5,5.7,5.2,5.6],"z":[4.5,4.7,4.6,4.9,4.7,4.8,5.1,4.5,4.1,4.6,4.4,4.4,4.5,4.2,4.6,4.8,4.4,4.4,4.4,4.9,4,4,4.2,4.4,4.4,4.4,4.7,4.5,4.8,4.6,4.6,4.5,4.6,4.1,4.7,4.9,5.1,5.4,5.2,5.2,5.6,5.9,6.2,6.3,6.4,6.5,6.7,5.7,6.2,6.4,5.8,6.5,6.4,6.2,6.2,6.6,6.6,6.7,6.6,5.4,6.1,6,5.6,5.7,5.7,6.1,5.7,5.2,5.5,5,4.9,5,5.2,4.9,5.4,5.5,5.1,4.7,5,5.1,4.8,5,4.6,5.3,5.7,5,5.3,5.5,5.2,5.7,6.3,7.1,7.2,8.7,9.4,8.8,8.6,9.2,9.2,8.6,9.5,9,9,8.2,8.7,8.2,8.3,7.8,7.7,7.9,7.8,7.7,8.4,8,7.5,7.2,7.2,7.3,7.9,6.2,7.1,7,6.7,6.9,7,6.8,6.5,6.7,6.2,6.1,5.7,6,5.8,5.8,5.6,5.9,5.5,5.6,5.9,5.9,5.9,5.4,5.6,5.6,5.9,4.8,5.5,5.5,5.3,5.7,5.3,5.8,6,5.8,5.7,6.4,7,7.5,7.7,7.5,7.7,7.5,7.4,7.1,7.1,7.4,6.9,6.6,7.1,7.2,6.8,6.8,6.9,6.9,7.1,7.5,7.7,8.1,8.5,9.5,8.5,8.7,9.5,9.7,10,10.2,11.1,9.8,10.4,10.9,12.3,11.3,10.1,9.3,9.3,9.4,9.3,8.7,9.1,8.3,8.3,8.2,9.1,7.5,7.5,7.3,7.6,7.2,7.2,7.3,6.8,7.1,7.1,6.9,6.9,6.6,6.9,7.1,6.9,7.1,7,6.8,6.7,6.9,6.8,6.7,6.8,7,6.9,7.1,7.4,7,7.1,7.1,6.9,6.6,6.6,7.1,6.6,6.5,6.5,6.4,6,6.3,6.2,6,6.2,6.3,6.4,5.9,5.9,5.8,6.1,5.9,5.7,5.6,5.7,5.9,5.6,5.4,5.4,5.4,5.3,5.4,5.6,5,4.9,4.9,4.8,4.9,5.1,5.3,5.1,4.8,5.2,5.2,5.4,5.4,5.6,5.8,5.7,5.9,6,6.2,6.7,6.6,6.4,6.9,7,7.3,6.8,7.2,7.5,7.8,8.1,8.2,8.3,8.5,8.8,8.7,8.6,8.8,8.6,9,9,9.3,8.6,8.5,8.5,8.4,8.1,8.3,8.2,8.2,8.3,8,8.3,8.3,8.6,9.2,9.3,9.1,9.2,9.3,9,8.9,9.2,10,9,8.7,8,8.1,8.3,8.3,9.1,7.9,8.5,8.3,7.9,8.2,8,8.3,8.3,7.8,8.3,8.6,8.6,8.3,8.3,8.4,8.5,8.3,7.7,7.8,7.8,8.1,7.9,8.3,8,8,8.3,7.8,8.2,7.7,7.6,7.5,7.4,7,6.8,6.7,6,6.9,6.7,6.8,6.7,5.8,6.6,6.8,6.9,6.8,6.8,6.2,6.5,6.3,5.8,6.5,6,6.1,6.2,5.8,5.8,6.1,6,6.1,5.8,5.7,6,6.3,5.2,6.1,6.1,6,5.8,6.1,6.6,5.9,6.3,6,6.8,6.9,7.2,7.3,7.7,8.2,8.4,8.3,8.4,8.9,9.5,11,8.9,9,9.5,9.6,9.3,9.6,9.6,9.5,9.7,10.2,9.9,11.5,10.3,10.1,10.2,10.4,10.3,10.4,10.6,10.2,10.2,9.5,9.9,11,8.9,9.2,9.6,9.5,9.7,9.5,9.4,9.2,9.3,9,9.1,9,8.8,9.2,8.4,8.6,8.5,8.7,8.6,9.1,8.7,8.4,8.5,7.3,8,8.4,8,7.9,8.3,7.5,8.3,8.5,9.1,8.6,8.2,7.7,8.7,8.8,8.7,8.4,8.6,8.4,9,8.7,8.7,9.4,7.9,9,9.7,9.7,10.2,10.4,9.8,10.5,10.7,11.7,12.3,13.1,14.2,17.2,16,16.3,17.8,18.9,19.8,20.1,20,19.9,20.4,22.1,22.3,25.2,22.3,21,20.3,21.2,21,21.9,21.6,21.1,21.5,20.9,21.6,22.3,22,22.4,22,20.5,20.9,20.5,21,19.8,19.2,19.1,19.9,20.1,17.5,18.5,18.8,19.7,18.5,17.6,16.2,17.5,17.7,17.1,17,16.6,16.3,16.8,16.5,16.1,17,17,15.9,16.2,15.9,15.6,14.5,13.2,13.5,13.3,13.3,13.5,12.8,12.6,13.4,13.1,12.2,11.7],"opacity":0.7,"type":"scatter3d","mode":"markers","name":"true values","marker":{"color":"rgba(31,119,180,1)","size":[55],"sizemode":"area","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"size":55},"error_y":{"color":"rgba(31,119,180,1)","width":55},"error_x":{"color":"rgba(31,119,180,1)","width":55},"line":{"color":"rgba(31,119,180,1)","width":55},"frame":null},{"x":[565.338857323232,567.34438031746,604.303565936842,670.530253311688,567.34438031746,649.233538015872,700.354473629149,569.374667380953,578.770714047619,604.848857148963,578.159574049283,589.842028573093,598.873373809523,593.984626507936,601.053424847374,718.706348968253,594.995737822733,606.557573378289,604.703825997336,1168.75484473693,632.491427301589,775.661755714287,605.233181190476,606.557573378289,591.24130450383,600.831973616383,616.133788787879,631.500626904762,677.80069611111,604.303565936842,604.303565936842,600.245875714285,702.307743418804,658.070749047618,661.864579105339,670.672077316018,753.683912380952,785.869376623377,752.355541897547,762.209838412698,755.790113160172,772.690564916749,723.564507216117,730.061706105006,725.228481471862,756.419371349205,844.520078030304,812.652278973802,755.220017612943,750.586799090909,816.906994661273,756.419371349205,803.663505401265,746.826302324342,810.580715470085,824.327103311687,821.976724978354,1007.86781088745,821.976724978354,884.054328210678,959.854991996338,871.01023923521,842.477799826839,884.026078685203,821.859013100788,836.008463901099,830.83039474914,808.604335952382,866.403648015874,863.855545022755,823.584211707181,828.585333907203,830.519711353647,861.712650353536,887.932941230992,870.202457063491,869.154285714284,785.013897597404,886.490916288156,870.727149047617,824.468181190474,886.802301396383,702.307743418804,931.817320497836,884.026078685203,810.523547002442,948.995903412698,851.97161,853.764429603174,854.529565005549,851.613230193141,1558.96148909357,1470.04790272894,1163.1779084127,1269.17391333333,1217.64858857143,1325.05086291486,1192.90016714286,1192.90016714286,1218.05923093074,1443.85666269841,1357.50548166667,1338.47688309524,1559.89502258297,1494.91040507937,1590.47130440837,1586.37108339025,1485.18200436508,1572.5514252381,1617.31780349206,1394.52384079365,1532.63698650793,1988.31417452381,1552.75485587301,1445.1430629293,2514.97986384004,1437.28988621379,1465.00472174603,1612.1610992785,1411.19962904151,1440.92035988722,1737.28032736347,1370.62560810967,1631.51952595238,1461.20964698413,1648.01448088523,1024.60439777778,1370.62560810967,1471.97805942086,1473.26576913919,1563.09172210845,1681.77462363637,1525.16986614035,1555.30893360067,1486.11053117605,1499.19554195138,1481.13080952381,1486.11053117605,1562.71815337996,1578.26624709263,1499.27234893551,1516.75991376624,1556.20176861472,1724.86695744588,1520.55276203074,1804.71291706349,2419.31624309524,1725.26902865079,1719.54122200244,1563.09172210845,1628.90682666666,1616.85473921394,1606.69297116883,1624.22135009112,1584.79571927295,1568.33968655123,1737.28032736347,1994.04151920635,1708.03207523809,2048.79302992064,1751.59061619048,2123.11636753968,2048.59594942696,1844.3977858396,1893.91175385547,2043.1753197619,2008.52370492064,1681.85252831169,1853.78792936052,1966.54927479243,1835.21507850427,1728.74879612332,1712.97749349207,1887.7040868254,1612.29611337928,1975.99694579365,1828.48871145743,1740.31165095238,1839.5403934127,1831.60856333333,1858.5399534127,1624.7729884127,2087.36019809524,2243.54803741702,2244.115475,2350.6393745671,2422.78877555556,2364.9649927392,2517.64644238095,2575.36855333333,3989.88801612943,2922.89435214286,2416.53007666667,2597.08576606782,2507.33967273449,2553.31214801588,2700.54896273449,3161.26233031746,2815.14106739928,2141.12209481882,2145.31531156486,1968.67165409091,2328.09987892968,2125.76000672854,2048.79302992064,2321.59925920635,2236.89838436508,2244.85322907814,2160.38996407814,2194.29359849206,2308.8639639011,2560.47787282373,2988.4042240142,2718.07274877012,2055.24974998252,2747.28259926407,2645.81542311688,3036.7916691152,4262.90081206349,2560.47787282373,3106.83068063492,3208.68824486153,3151.94483922883,2946.03237033911,2672.08599167888,2887.28708818903,2964.01265818681,2948.12354523809,2946.03237033911,2960.4852506015,4411.80627047619,3268.28952785714,3064.60446607047,4293.01625246298,2924.57500954546,3214.49615153791,3214.49615153791,5182.78110298247,3222.04401992063,3437.70456015873,3813.50085222222,4043.37551948052,3549.14897444444,3267.90739959707,3286.80983885504,3325.00240143661,3258.44156414253,3271.7589605217,3332.64827149351,3459.68420553723,3438.68172641747,3409.72904994988,3312.57111244478,3375.89551323566,3599.17768208679,3525.40153205711,3513.17118233932,3438.68172641747,3525.40153205711,3480.62002844877,2829.84791948052,3657.90116693474,3627.42755904762,3623.88649502165,3560.11422023088,3797.03169555945,3596.86421001443,3622.3534907154,3509.74144469059,3659.42815332612,3712.41571444444,3688.84255119048,3650.87697285714,3537.912207215,3743.27438040488,3761.69188254801,3652.7674147916,3734.41521170996,3711.63862992785,3769.52755106099,3792.60452947496,3651.59705473637,3257.75110571429,3698.43884340659,3678.2747093795,3342.07879538323,3520.23989132035,3595.09717795094,3478.78100023809,3995.37345199244,3476.09267961538,3218.97513264957,3869.55161444445,3947.46450007936,3977.79787650793,4018.66696440837,4094.40760955432,3719.99126803419,3648.69997470086,3161.26233031746,3973.3800089466,4009.95575071429,4358.47844450216,4411.23399944444,4470.80488166667,3116.09779813131,4347.28717545454,4332.51171801587,4389.56347166666,4480.90993730158,4885.25124302308,4621.35160588054,4621.78284282106,4672.13138290043,5090.2160483794,5296.21625114386,5324.00625199578,4396.03845447495,4814.37641564935,4940.30840564103,4905.74973130591,5140.89434768898,4702.75216880953,5216.10944989898,4824.70756709956,5039.95570945055,4896.66119809523,6812.38054284992,4824.70756709956,5007.57315531025,5050.38655555554,4717.83417650793,4717.074645883,5090.2160483794,4955.44025102453,5293.98421106782,4943.87676614719,5157.544009445,5293.98421106782,4943.44084406926,5330.09612133478,5482.24970899045,5157.544009445,5213.8143140837,5261.27453114052,6647.13449275614,5178.2681266811,4992.12105322067,5157.544009445,5547.95174572039,5364.76598982684,5340.98900306471,5578.51944951437,5472.64961515873,5453.45144519148,5406.16956976191,5520.27395316517,5307.6063106993,5295.51561047619,5330.09612133478,5482.24970899045,5893.96810087302,5426.39286151182,5643.42792114385,5742.33832078422,5749.3282717366,4695.64932888889,4717.91284484126,4998.36401365079,4921.75858499999,5703.18232326839,6076.88969650795,5993.26219772007,6012.98703722223,5993.16867213342,5938.66231152274,6027.50436428572,6284.98854309526,6149.04895095239,6056.044349001,6312.34480380954,6488.89098690477,6358.75498666666,6469.54997666666,6641.40069304844,6402.71830666667,6831.94004499279,6656.05566622101,6462.37604690477,6777.10740209607,6649.16784915957,6712.33324717339,6691.92755642136,6765.18093209402,6660.45865788972,6470.17233222224,6737.54616388169,6623.02212095239,6405.42744142858,6788.81680431624,6651.84749114164,6831.94004499279,6764.26834138177,6746.99632788766,6715.98292833334,6800.48828891056,6849.5570807143,6869.56312999279,6663.60033063493,6287.31400875904,6176.02227251248,8048.54062968255,8155.17855555556,7271.85079436508,6814.10302997504,6721.81458190363,7057.92322002166,7530.16544809524,7744.08443081196,8313.48414761906,7790.79946611112,8334.96809095238,7570.96981409814,7665.27607325396,7692.79843479797,7716.76932275114,7716.76932275114,7716.88715425686,7883.37556797259,7895.04151885282,7852.68202333333,8471.13474666665,8130.37638230158,7862.08245047618,8007.46305541347,8060.39536896826,7943.0244584127,8104.33702928572,8226.38248656065,8007.46305541347,8007.46305541347,7716.88715425686,7929.85355539681,7988.41931587304,7892.59990141415,7959.42857420633,8693.64046904762,8652.3643945238,9137.60064805195,7208.91521946608,8803.78023333335,8653.83863253968,8576.15056122655,8852.1702795238,8932.05187725109,8852.7642795238,9065.65932137806,8742.29115333333,9114.26047510102,9263.84159521645,9090.19453968254,9535.12631911255,9125.05419307359,8998.08099269842,9380.317925671,9253.69496145021,9382.30862325398,7937.4165363492,9226.62890452381,9538.56002069986,9245.75606972584,9165.07785493507,9177.6517444488,8813.87396044012,9243.29293187304,9404.18703214286,9334.18331079365,9408.828724899,9193.03630147187,8948.0449961111,9535.12631911255,9364.5557894733,9535.12631911255,9569.79200843434,9405.62067045455,9538.56002069986,9334.1097715873,9555.48676281389,9599.26121948055,9233.0160268254,6986.57422820566,7822.85705384226,9153.8478343218,9407.50365503608,9352.63043956713,8635.87083761904,8074.01121898991,8718.60288070708,8807.18224737376,10065.2846552442,9763.89819,10140.1544010317,8773.58928976193,10172.1615076984,10097.1523657792,10915.6762953968,10142.2978751071,10276.7666919048,10185.73614,10153.1911333333,10165.5907228571,10349.1436154762,10447.4092973016,10395.3645061905,10252.8175691126,10250.4848135198,10271.9089817738,10237.8015514408,10277.6209295238,10397.5891585714,10447.5995533333,10449.0021751071,10589.31815,10662.8688568615,10406.5422257792,10491.1868279643,10468.1281584404,10417.9718233333,10608.1148628571,10608.7846033333,10563.49039,10598.147375,10547.1076395238,10755.5299468615,10804.5528966667,10761.9200710318,10900.1762933333,10916.6552653968,10887.3125387302,10757.3353726191,10735.60808,10916.2669001948,10894.824261342,10818.5936726191,10174.8355071429,8816.6644762313,11492.2458190476,11330.1150278571,10994.8779020635,11427.8288561905,11430.4395054762,11376.699077619,11340.8971095238,11379.6146909524,11456.8454788095,11522.6913845238,11524.5686933333,11505.8386933333,11487.869965873,11495.6694115873,11658.216132619,11740.8521615873,11836.6831992857,11884.3326192857,11912.9631626191,11915.0999645238,11943.0268972222,11943.6597472222,11876.0564857143,11835.9815049206,11694.6382383333,11397.6255090476,11401.4666871429,10925.2089028572],"y":[12.5,12.5,11.7,12.5,12.5,12.1,11.7,12.2,11.6,12.2,12,11.6,10.6,10.4,10.4,10.6,10.4,10.9,10,9.4,9.9,9.5,10,10.9,11.7,11.5,11.5,11.3,11.5,11.7,11.7,11.6,12.3,13.3,12.3,11.7,13.2,13.1,12.9,13,13.3,12.9,13.1,13.1,13.3,13,13.4,14.4,13.6,13.6,12.9,13,12.8,12.9,12.4,12.6,11.5,11.3,11.5,11.4,11.4,11.8,12,12.7,13.4,13.4,12.1,12.2,12.4,12.8,12.8,13.2,12.8,13.6,12.8,14,14,14.4,14,13.8,13,12.7,12.3,12.5,12.7,11.6,12.3,13,13.4,13.6,12.8,12.1,12.3,13.9,17,13.9,12.3,12.6,12.6,13,12.3,11.5,11.3,11.9,11.8,11.2,11.8,10.9,11.2,11.2,10.8,10.6,10.9,9.9,9.8,8.5,9.8,9.9,9.8,10.2,10.1,10.5,10.7,10.7,10.8,11,11.4,10.7,10.5,10.3,9.8,9.5,10.3,9.9,10,10.2,10,10,10.6,10.5,10.7,10.4,9.8,9.3,10,9.2,8.9,9.3,9.4,9.8,9.6,9.8,9.8,10.5,10.6,10.4,10.5,10.6,11.1,11,11.5,11.2,10.5,10.4,10.3,10.3,10.4,10.2,11.7,11.4,11.9,12.5,12.7,12,12.2,11.6,11.7,12.4,11.7,11.6,12,11.9,11.1,10.7,10.3,10.3,10.4,10.5,10,9.6,9.4,8.5,9,8.7,9,9.1,9.7,9.5,9.4,11.1,10.9,10.9,10.5,10.5,11,11.2,11.2,11.2,10.3,10.6,9.7,8.5,8.1,9.4,10.5,9,8.5,7.5,6.7,8.5,8.4,8,8,8.7,9.3,9.1,8.6,8.8,8.7,8.4,6.6,7.8,8.2,6.4,9.1,7.9,7.9,3.8,7.5,7,6.8,6.5,7,7.6,7.9,8,7.5,7.9,7.5,8.1,7.7,7.8,7.9,7.8,8.2,8,7.7,7.7,8,8.4,8.9,7.9,7.6,7.6,7.7,7.1,7.5,7.9,8,7.2,7.4,8.1,7.8,8.2,8,7.9,8,7.5,7.5,7.3,7.4,8.2,8.7,8.3,7.4,8,7.7,8.2,7.6,7.9,8.1,8.6,8.4,9.1,8.8,9.2,9.2,9.4,9.4,9.5,9.1,9.2,8.2,7.4,7.3,9.9,8.3,8.4,8.3,8.2,7.7,7.2,7,7.1,6.3,5.6,5.6,8.4,6.4,5.9,6.2,5.8,7.1,6.3,6.4,5.9,6.2,6.5,6.4,6.5,6.9,7.3,7,6.3,6.5,6.1,6.4,6.1,6.1,6.5,6,5.5,6.1,6.1,6,5,6.1,6.5,6.1,5.9,6,5.8,5.8,5.7,5.6,5.7,5.8,5.9,6.2,6,5.5,5.4,5.6,5.6,5.8,5.8,6.7,6.8,6.9,6.6,6.3,6.2,6.3,6.2,5.8,5.6,5.7,5.2,5.7,5.6,5.3,4.5,4.3,4.2,4.1,4,3.5,3.9,4.1,3.7,4.7,4.2,3.9,4.4,4.2,4.2,4.6,4.6,3.8,4,3.8,3.5,4,4.1,4.5,4.3,3.7,3.7,5,6.1,6.3,2.7,3.4,3.8,5.6,5.3,5.3,5.1,5.6,5.4,4.6,4.4,4.9,4.7,4.7,4.5,4.5,4.7,4.6,4.6,5.1,4.9,5.5,5.3,4.5,4.6,4.7,4.8,4.5,4.5,4.5,4.7,4.7,5,4.5,4.6,3.9,3.8,3.4,6.3,2.9,2.7,2.7,2.1,3,2.2,1.9,2.4,2.3,2.6,2.7,2.8,3.7,3.8,3.7,3.4,3.2,3.4,2.9,3,3,3.1,3.2,3,3,3.3,3.6,3.2,3,2.8,2.8,2.6,2.8,2.8,2.5,3,3.4,3.9,4,3.5,7.9,5.6,4.4,3.7,4.4,5.4,6.3,6.5,6.5,5.9,6.1,6.7,8.1,6.7,6,4.9,5.9,5.4,5.7,5.7,5.6,5.2,5,5.6,6,5.9,5.9,5.8,5.6,5.4,5.3,5.9,6.2,6.4,6,5.9,5.9,6.1,6.3,6.2,5.7,5.5,5.6,6.4,6.6,6.7,6.9,7,7,7.1,6.6,6.4,6.5,7.1,8.2,10.5,4.5,4.7,4.9,5.1,5.2,5.3,5.1,5.3,5.2,4.7,4.3,4.1,4.9,5,4.8,5,5.1,5.1,5.1,4.7,4.6,4.6,4.5,5,5.5,5.7,5.2,5.6],"z":[4.5,4.7,4.6,4.9,4.7,4.8,5.1,4.5,4.1,4.6,4.4,4.4,4.5,4.2,4.6,4.8,4.4,4.4,4.4,4.9,4,4,4.2,4.4,4.4,4.4,4.7,4.5,4.8,4.6,4.6,4.5,4.6,4.1,4.7,4.9,5.1,5.4,5.2,5.2,5.6,5.9,6.2,6.3,6.4,6.5,6.7,5.7,6.2,6.4,5.8,6.5,6.4,6.2,6.2,6.6,6.6,6.7,6.6,5.4,6.1,6,5.6,5.7,5.7,6.1,5.7,5.2,5.5,5,4.9,5,5.2,4.9,5.4,5.5,5.1,4.7,5,5.1,4.8,5,4.6,5.3,5.7,5,5.3,5.5,5.2,5.7,6.3,7.1,7.2,8.7,9.4,8.8,8.6,9.2,9.2,8.6,9.5,9,9,8.2,8.7,8.2,8.3,7.8,7.7,7.9,7.8,7.7,8.4,8,7.5,7.2,7.2,7.3,7.9,6.2,7.1,7,6.7,6.9,7,6.8,6.5,6.7,6.2,6.1,5.7,6,5.8,5.8,5.6,5.9,5.5,5.6,5.9,5.9,5.9,5.4,5.6,5.6,5.9,4.8,5.5,5.5,5.3,5.7,5.3,5.8,6,5.8,5.7,6.4,7,7.5,7.7,7.5,7.7,7.5,7.4,7.1,7.1,7.4,6.9,6.6,7.1,7.2,6.8,6.8,6.9,6.9,7.1,7.5,7.7,8.1,8.5,9.5,8.5,8.7,9.5,9.7,10,10.2,11.1,9.8,10.4,10.9,12.3,11.3,10.1,9.3,9.3,9.4,9.3,8.7,9.1,8.3,8.3,8.2,9.1,7.5,7.5,7.3,7.6,7.2,7.2,7.3,6.8,7.1,7.1,6.9,6.9,6.6,6.9,7.1,6.9,7.1,7,6.8,6.7,6.9,6.8,6.7,6.8,7,6.9,7.1,7.4,7,7.1,7.1,6.9,6.6,6.6,7.1,6.6,6.5,6.5,6.4,6,6.3,6.2,6,6.2,6.3,6.4,5.9,5.9,5.8,6.1,5.9,5.7,5.6,5.7,5.9,5.6,5.4,5.4,5.4,5.3,5.4,5.6,5,4.9,4.9,4.8,4.9,5.1,5.3,5.1,4.8,5.2,5.2,5.4,5.4,5.6,5.8,5.7,5.9,6,6.2,6.7,6.6,6.4,6.9,7,7.3,6.8,7.2,7.5,7.8,8.1,8.2,8.3,8.5,8.8,8.7,8.6,8.8,8.6,9,9,9.3,8.6,8.5,8.5,8.4,8.1,8.3,8.2,8.2,8.3,8,8.3,8.3,8.6,9.2,9.3,9.1,9.2,9.3,9,8.9,9.2,10,9,8.7,8,8.1,8.3,8.3,9.1,7.9,8.5,8.3,7.9,8.2,8,8.3,8.3,7.8,8.3,8.6,8.6,8.3,8.3,8.4,8.5,8.3,7.7,7.8,7.8,8.1,7.9,8.3,8,8,8.3,7.8,8.2,7.7,7.6,7.5,7.4,7,6.8,6.7,6,6.9,6.7,6.8,6.7,5.8,6.6,6.8,6.9,6.8,6.8,6.2,6.5,6.3,5.8,6.5,6,6.1,6.2,5.8,5.8,6.1,6,6.1,5.8,5.7,6,6.3,5.2,6.1,6.1,6,5.8,6.1,6.6,5.9,6.3,6,6.8,6.9,7.2,7.3,7.7,8.2,8.4,8.3,8.4,8.9,9.5,11,8.9,9,9.5,9.6,9.3,9.6,9.6,9.5,9.7,10.2,9.9,11.5,10.3,10.1,10.2,10.4,10.3,10.4,10.6,10.2,10.2,9.5,9.9,11,8.9,9.2,9.6,9.5,9.7,9.5,9.4,9.2,9.3,9,9.1,9,8.8,9.2,8.4,8.6,8.5,8.7,8.6,9.1,8.7,8.4,8.5,7.3,8,8.4,8,7.9,8.3,7.5,8.3,8.5,9.1,8.6,8.2,7.7,8.7,8.8,8.7,8.4,8.6,8.4,9,8.7,8.7,9.4,7.9,9,9.7,9.7,10.2,10.4,9.8,10.5,10.7,11.7,12.3,13.1,14.2,17.2,16,16.3,17.8,18.9,19.8,20.1,20,19.9,20.4,22.1,22.3,25.2,22.3,21,20.3,21.2,21,21.9,21.6,21.1,21.5,20.9,21.6,22.3,22,22.4,22,20.5,20.9,20.5,21,19.8,19.2,19.1,19.9,20.1,17.5,18.5,18.8,19.7,18.5,17.6,16.2,17.5,17.7,17.1,17,16.6,16.3,16.8,16.5,16.1,17,17,15.9,16.2,15.9,15.6,14.5,13.2,13.5,13.3,13.3,13.5,12.8,12.6,13.4,13.1,12.2,11.7],"opacity":0.7,"type":"scatter3d","mode":"markers","name":"modelled values","marker":{"color":"rgba(255,127,14,1)","size":[55],"sizemode":"area","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"size":55},"error_y":{"color":"rgba(255,127,14,1)","width":55},"error_x":{"color":"rgba(255,127,14,1)","width":55},"line":{"color":"rgba(255,127,14,1)","width":55},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":[]}</script>
Look’s like random forrest models are pretty decent for non-linear regression!</p>
