---
title: visualising models in 3d with plotly and nse functions
author: Tom Greenwood
date: '2019-02-09'
slug: visualising-models-in-3d-with-plotly-and-nse-functions
categories:
  - R
tags:
  - functions
  - plotly
  - visualisation
---

<script src="/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="/rmarkdown-libs/plotly-binding/plotly.js"></script>
<script src="/rmarkdown-libs/typedarray/typedarray.min.js"></script>
<script src="/rmarkdown-libs/jquery/jquery.min.js"></script>
<link href="/rmarkdown-libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
<script src="/rmarkdown-libs/crosstalk/js/crosstalk.min.js"></script>
<link href="/rmarkdown-libs/plotly-htmlwidgets-css/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="/rmarkdown-libs/plotly-main/plotly-latest.min.js"></script>


<p>One of the areas I’m planning to improve on is visualisation. Ultimately, this means D3, but in the meantime I wrote a fairly useful function for showing the fit of a model with two inputs, along with the data, using plotly. First, load the necessary libraries:</p>
<pre class="r"><code>library(plotly)
library(randomForest)
library(rlang)
library(dplyr)
library(magrittr)</code></pre>
<p>(you could actually write thing function without rlang or magrittr, but it’s just a bit neater with them.) Here’s the function:</p>
<pre class="r"><code>plot_3d &lt;- function(df, x, y, z) {
  
  x &lt;- enquo(x)
  y &lt;- enquo(y)
  z &lt;- enquo(z) 
  
  # build a model 
  m &lt;- randomForest(expr(!!get_expr(x) ~ !!get_expr(y) + !!get_expr(z)) %&gt;% as.formula, df)
  
  # add the predictions to df
  df %&lt;&gt;% mutate(preds = predict(m, newdata = df ))
  
  plot_ly(df) %&gt;%
    add_trace(x = x, y = y, z = z, 
                opacity = 0.7,
                type = &quot;scatter3d&quot;, 
                mode = &quot;markers&quot;,
                colors = c(&quot;grey&quot;, &quot;blue&quot;),
                name = &quot;true values&quot;,
                size = 10
              ) %&gt;%
    add_trace(x = ~preds, y = y, z = z,
                opacity = 0.7,
                type = &quot;scatter3d&quot;, 
                mode = &quot;markers&quot;,
                name = &quot;modelled values&quot;,
                size = 10
                ) %&gt;%
    layout(scene = list(xaxis = list(title = quo_text(x)),
                        yaxis = list(title = quo_text(y)),
                        zaxis = list(title = quo_text(z))
    )
    )
  
}

economics %&gt;% plot_3d(pce, psavert, uempmed)</code></pre>
<p><div id="htmlwidget-1" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"visdat":{"30df12a6370b":["function () ","plotlyVisDat"]},"cur_data":"30df12a6370b","attrs":{"30df12a6370b":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"z":{},"opacity":0.7,"type":"scatter3d","mode":"markers","colors":["grey","blue"],"name":"true values","size":10,"inherit":true},"30df12a6370b.1":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"z":{},"opacity":0.7,"type":"scatter3d","mode":"markers","name":"modelled values","size":10,"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"scene":{"xaxis":{"title":"pce"},"yaxis":{"title":"psavert"},"zaxis":{"title":"uempmed"}},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"x":[507.4,510.5,516.3,512.9,518.1,525.8,531.5,534.2,544.9,544.6,550.4,556.8,563.8,567.6,568.8,572.3,577.4,577.2,584.2,589.5,589.7,594.7,601.1,601.7,603.5,610.8,614.1,619.4,621.4,623.7,629.6,634.9,633.2,637,643.4,647.2,649.5,653.9,660.1,659.3,657.6,666.6,677.2,680.4,683,689.8,692.2,700.8,699.9,706,714.1,716.9,722.1,729.6,732.6,737.3,750.4,753.8,759.2,762.9,771.2,777.7,782.5,796.3,801.8,807.5,817.9,827.2,834.2,837.2,843.1,845.8,855.7,854.9,870.9,869.8,878.6,878.4,886.4,891.6,903.3,912.7,924.3,929.9,939.8,956.6,956.8,961,958,963.6,977.4,991.3,992.6,997.2,1021.2,1029.1,1042.2,1049.4,1057.2,1063.2,1078,1094.4,1109.5,1110.1,1117.3,1127.8,1125.1,1142.9,1152.1,1160.5,1171.4,1179.5,1191.7,1214.1,1217.4,1233.7,1240.7,1249.7,1259.6,1266.3,1283.2,1288.5,1297.4,1314.3,1330,1339.3,1333,1358.9,1381.4,1400.2,1415.9,1429.8,1430.8,1451,1456.9,1471,1484.7,1500.5,1506.3,1521.6,1535,1542.3,1562.7,1579.6,1590.1,1619.7,1638.1,1646,1661.7,1670.7,1701.6,1705.6,1712.4,1699.5,1704.3,1723,1751.2,1767.7,1784.1,1820.4,1830.2,1855.5,1874.7,1889.4,1908.1,1909.1,1918.2,1938.5,1945.7,1969.8,1968.2,1966.2,1972.4,1989.9,1997.4,2021.4,2024.4,2027.2,2045.9,2050.2,2075.1,2083.7,2108.9,2130.7,2154.7,2167.4,2180.1,2183.1,2208.6,2231.8,2251,2280.8,2309,2324.8,2339.1,2361.8,2370.4,2397.9,2423.8,2408.1,2436.4,2462.6,2479.8,2501.2,2500.5,2518.4,2540.3,2538.2,2578.6,2590,2626.3,2648.6,2656.8,2668.4,2705.9,2699.3,2725.9,2762.7,2805.6,2767.1,2782.7,2822.8,2838.3,2831.2,2834.7,2846.5,2869,2873.5,2893.4,2911.1,2984.6,2945.9,2941.7,3010.8,2949.9,3016.5,3028.4,3054.1,3063.9,3088.4,3110.7,3147,3142.9,3151.1,3160.9,3190.9,3230.7,3238.5,3277.8,3280.4,3311,3335.6,3359.3,3384.3,3391.4,3430.4,3447,3476.3,3499.9,3503.9,3514.5,3558.6,3567.5,3582.4,3601.7,3636.8,3638.1,3650,3659.7,3700.7,3747.2,3744.8,3771.5,3786.7,3792.5,3821.3,3838.5,3865,3886.7,3887.1,3888.4,3877.8,3857.6,3883.3,3929.7,3923.9,3950,3957.1,3982.4,3985.4,4001.2,3992.9,4020.6,4037.7,4101.9,4116.8,4134.3,4149,4176.1,4195,4223,4239.3,4273.9,4303.5,4319.5,4355.6,4359.7,4374.3,4371.4,4412.4,4441.3,4458.8,4487.7,4499.9,4530.5,4552,4573.4,4590.7,4604.8,4652.3,4665.4,4690.7,4689.2,4728.8,4740.8,4783,4795.5,4833.3,4846,4862.3,4871.9,4871.7,4906.5,4911.5,4954.4,4999,4991.8,5027.1,5042.5,5035.9,5077.8,5120.1,5108.9,5156.1,5196.4,5231.6,5247.2,5253.7,5275.8,5299,5320,5351.5,5375,5401.7,5434.9,5457.7,5477.6,5482.8,5484.3,5518.2,5573,5611.8,5625.6,5661.2,5685.2,5716.4,5714.4,5748.4,5775,5812.9,5863.3,5897.2,5915.6,5951,5991.8,6025.8,6042.7,6098.2,6099.1,6128.2,6159.7,6223.6,6253.4,6281.9,6309.5,6354.8,6407.4,6431.2,6467.2,6568.2,6564.7,6648.7,6714.8,6701,6737.2,6773.6,6793.7,6828.7,6913.1,6919.6,6934.5,6979.1,7009.8,7029.3,7022.1,7036.2,7083.1,7097.1,7109.2,7146.1,7054.8,7250.2,7209.6,7190,7217.7,7259.7,7276.7,7345.6,7321.8,7366.1,7424.2,7449,7426.1,7469.3,7499.8,7552.6,7579.5,7573.6,7627.5,7661.7,7669.2,7722.9,7783.8,7878.9,7874,7890.6,7950.4,7974.3,8037.3,8072.1,8121,8141.6,8212.9,8204.6,8270.7,8294.4,8373,8417.9,8458.4,8516.5,8521.2,8575.7,8622.5,8715.9,8680.6,8775.3,8867.9,8872.6,8923.6,8959.6,8987.7,9026.8,9100.1,9134.7,9168.1,9223.3,9254.1,9283.8,9360.4,9368.6,9393.9,9413.3,9431.2,9516.5,9553.1,9590.8,9631.6,9670.6,9708.9,9723.3,9759.6,9800.6,9837.5,9853.9,9928.6,9947.6,9963.2,9955.7,10004.2,10044.6,10093.3,10149.4,10151.1,10140.3,10083.2,9983.3,9851.2,9744.2,9792.1,9775.7,9742.9,9741.9,9759.7,9807.6,9835.2,9961.9,9875.4,9924.6,9946.1,10000.6,10003.4,10034.7,10095.5,10106.9,10140.2,10165.9,10184.3,10247.1,10268.9,10343.7,10399.8,10436.1,10474.7,10512.4,10583.5,10624.6,10653.1,10676.4,10727.1,10745.6,10790.6,10827.6,10828.7,10827.3,10905.5,10979.2,10994.3,11030.2,11029,11032.5,11074.8,11104.8,11179.6,11199.9,11222.8,11245.2,11303.2,11371.4,11378.8,11373.3,11407.1,11462.4,11484.7,11511.6,11559.6,11602.1,11671.5,11686.3,11663.9,11714.4,11807.1,11825.2,11864.3,11922.6,11944.4,12017,12044.6,12096.4,12142.2,12122,12080.8,12095.9,12161.5,12158.9],"y":[12.5,12.5,11.7,12.5,12.5,12.1,11.7,12.2,11.6,12.2,12,11.6,10.6,10.4,10.4,10.6,10.4,10.9,10,9.4,9.9,9.5,10,10.9,11.7,11.5,11.5,11.3,11.5,11.7,11.7,11.6,12.3,13.3,12.3,11.7,13.2,13.1,12.9,13,13.3,12.9,13.1,13.1,13.3,13,13.4,14.4,13.6,13.6,12.9,13,12.8,12.9,12.4,12.6,11.5,11.3,11.5,11.4,11.4,11.8,12,12.7,13.4,13.4,12.1,12.2,12.4,12.8,12.8,13.2,12.8,13.6,12.8,14,14,14.4,14,13.8,13,12.7,12.3,12.5,12.7,11.6,12.3,13,13.4,13.6,12.8,12.1,12.3,13.9,17,13.9,12.3,12.6,12.6,13,12.3,11.5,11.3,11.9,11.8,11.2,11.8,10.9,11.2,11.2,10.8,10.6,10.9,9.9,9.8,8.5,9.8,9.9,9.8,10.2,10.1,10.5,10.7,10.7,10.8,11,11.4,10.7,10.5,10.3,9.8,9.5,10.3,9.9,10,10.2,10,10,10.6,10.5,10.7,10.4,9.8,9.3,10,9.2,8.9,9.3,9.4,9.8,9.6,9.8,9.8,10.5,10.6,10.4,10.5,10.6,11.1,11,11.5,11.2,10.5,10.4,10.3,10.3,10.4,10.2,11.7,11.4,11.9,12.5,12.7,12,12.2,11.6,11.7,12.4,11.7,11.6,12,11.9,11.1,10.7,10.3,10.3,10.4,10.5,10,9.6,9.4,8.5,9,8.7,9,9.1,9.7,9.5,9.4,11.1,10.9,10.9,10.5,10.5,11,11.2,11.2,11.2,10.3,10.6,9.7,8.5,8.1,9.4,10.5,9,8.5,7.5,6.7,8.5,8.4,8,8,8.7,9.3,9.1,8.6,8.8,8.7,8.4,6.6,7.8,8.2,6.4,9.1,7.9,7.9,3.8,7.5,7,6.8,6.5,7,7.6,7.9,8,7.5,7.9,7.5,8.1,7.7,7.8,7.9,7.8,8.2,8,7.7,7.7,8,8.4,8.9,7.9,7.6,7.6,7.7,7.1,7.5,7.9,8,7.2,7.4,8.1,7.8,8.2,8,7.9,8,7.5,7.5,7.3,7.4,8.2,8.7,8.3,7.4,8,7.7,8.2,7.6,7.9,8.1,8.6,8.4,9.1,8.8,9.2,9.2,9.4,9.4,9.5,9.1,9.2,8.2,7.4,7.3,9.9,8.3,8.4,8.3,8.2,7.7,7.2,7,7.1,6.3,5.6,5.6,8.4,6.4,5.9,6.2,5.8,7.1,6.3,6.4,5.9,6.2,6.5,6.4,6.5,6.9,7.3,7,6.3,6.5,6.1,6.4,6.1,6.1,6.5,6,5.5,6.1,6.1,6,5,6.1,6.5,6.1,5.9,6,5.8,5.8,5.7,5.6,5.7,5.8,5.9,6.2,6,5.5,5.4,5.6,5.6,5.8,5.8,6.7,6.8,6.9,6.6,6.3,6.2,6.3,6.2,5.8,5.6,5.7,5.2,5.7,5.6,5.3,4.5,4.3,4.2,4.1,4,3.5,3.9,4.1,3.7,4.7,4.2,3.9,4.4,4.2,4.2,4.6,4.6,3.8,4,3.8,3.5,4,4.1,4.5,4.3,3.7,3.7,5,6.1,6.3,2.7,3.4,3.8,5.6,5.3,5.3,5.1,5.6,5.4,4.6,4.4,4.9,4.7,4.7,4.5,4.5,4.7,4.6,4.6,5.1,4.9,5.5,5.3,4.5,4.6,4.7,4.8,4.5,4.5,4.5,4.7,4.7,5,4.5,4.6,3.9,3.8,3.4,6.3,2.9,2.7,2.7,2.1,3,2.2,1.9,2.4,2.3,2.6,2.7,2.8,3.7,3.8,3.7,3.4,3.2,3.4,2.9,3,3,3.1,3.2,3,3,3.3,3.6,3.2,3,2.8,2.8,2.6,2.8,2.8,2.5,3,3.4,3.9,4,3.5,7.9,5.6,4.4,3.7,4.4,5.4,6.3,6.5,6.5,5.9,6.1,6.7,8.1,6.7,6,4.9,5.9,5.4,5.7,5.7,5.6,5.2,5,5.6,6,5.9,5.9,5.8,5.6,5.4,5.3,5.9,6.2,6.4,6,5.9,5.9,6.1,6.3,6.2,5.7,5.5,5.6,6.4,6.6,6.7,6.9,7,7,7.1,6.6,6.4,6.5,7.1,8.2,10.5,4.5,4.7,4.9,5.1,5.2,5.3,5.1,5.3,5.2,4.7,4.3,4.1,4.9,5,4.8,5,5.1,5.1,5.1,4.7,4.6,4.6,4.5,5,5.5,5.7,5.2,5.6],"z":[4.5,4.7,4.6,4.9,4.7,4.8,5.1,4.5,4.1,4.6,4.4,4.4,4.5,4.2,4.6,4.8,4.4,4.4,4.4,4.9,4,4,4.2,4.4,4.4,4.4,4.7,4.5,4.8,4.6,4.6,4.5,4.6,4.1,4.7,4.9,5.1,5.4,5.2,5.2,5.6,5.9,6.2,6.3,6.4,6.5,6.7,5.7,6.2,6.4,5.8,6.5,6.4,6.2,6.2,6.6,6.6,6.7,6.6,5.4,6.1,6,5.6,5.7,5.7,6.1,5.7,5.2,5.5,5,4.9,5,5.2,4.9,5.4,5.5,5.1,4.7,5,5.1,4.8,5,4.6,5.3,5.7,5,5.3,5.5,5.2,5.7,6.3,7.1,7.2,8.7,9.4,8.8,8.6,9.2,9.2,8.6,9.5,9,9,8.2,8.7,8.2,8.3,7.8,7.7,7.9,7.8,7.7,8.4,8,7.5,7.2,7.2,7.3,7.9,6.2,7.1,7,6.7,6.9,7,6.8,6.5,6.7,6.2,6.1,5.7,6,5.8,5.8,5.6,5.9,5.5,5.6,5.9,5.9,5.9,5.4,5.6,5.6,5.9,4.8,5.5,5.5,5.3,5.7,5.3,5.8,6,5.8,5.7,6.4,7,7.5,7.7,7.5,7.7,7.5,7.4,7.1,7.1,7.4,6.9,6.6,7.1,7.2,6.8,6.8,6.9,6.9,7.1,7.5,7.7,8.1,8.5,9.5,8.5,8.7,9.5,9.7,10,10.2,11.1,9.8,10.4,10.9,12.3,11.3,10.1,9.3,9.3,9.4,9.3,8.7,9.1,8.3,8.3,8.2,9.1,7.5,7.5,7.3,7.6,7.2,7.2,7.3,6.8,7.1,7.1,6.9,6.9,6.6,6.9,7.1,6.9,7.1,7,6.8,6.7,6.9,6.8,6.7,6.8,7,6.9,7.1,7.4,7,7.1,7.1,6.9,6.6,6.6,7.1,6.6,6.5,6.5,6.4,6,6.3,6.2,6,6.2,6.3,6.4,5.9,5.9,5.8,6.1,5.9,5.7,5.6,5.7,5.9,5.6,5.4,5.4,5.4,5.3,5.4,5.6,5,4.9,4.9,4.8,4.9,5.1,5.3,5.1,4.8,5.2,5.2,5.4,5.4,5.6,5.8,5.7,5.9,6,6.2,6.7,6.6,6.4,6.9,7,7.3,6.8,7.2,7.5,7.8,8.1,8.2,8.3,8.5,8.8,8.7,8.6,8.8,8.6,9,9,9.3,8.6,8.5,8.5,8.4,8.1,8.3,8.2,8.2,8.3,8,8.3,8.3,8.6,9.2,9.3,9.1,9.2,9.3,9,8.9,9.2,10,9,8.7,8,8.1,8.3,8.3,9.1,7.9,8.5,8.3,7.9,8.2,8,8.3,8.3,7.8,8.3,8.6,8.6,8.3,8.3,8.4,8.5,8.3,7.7,7.8,7.8,8.1,7.9,8.3,8,8,8.3,7.8,8.2,7.7,7.6,7.5,7.4,7,6.8,6.7,6,6.9,6.7,6.8,6.7,5.8,6.6,6.8,6.9,6.8,6.8,6.2,6.5,6.3,5.8,6.5,6,6.1,6.2,5.8,5.8,6.1,6,6.1,5.8,5.7,6,6.3,5.2,6.1,6.1,6,5.8,6.1,6.6,5.9,6.3,6,6.8,6.9,7.2,7.3,7.7,8.2,8.4,8.3,8.4,8.9,9.5,11,8.9,9,9.5,9.6,9.3,9.6,9.6,9.5,9.7,10.2,9.9,11.5,10.3,10.1,10.2,10.4,10.3,10.4,10.6,10.2,10.2,9.5,9.9,11,8.9,9.2,9.6,9.5,9.7,9.5,9.4,9.2,9.3,9,9.1,9,8.8,9.2,8.4,8.6,8.5,8.7,8.6,9.1,8.7,8.4,8.5,7.3,8,8.4,8,7.9,8.3,7.5,8.3,8.5,9.1,8.6,8.2,7.7,8.7,8.8,8.7,8.4,8.6,8.4,9,8.7,8.7,9.4,7.9,9,9.7,9.7,10.2,10.4,9.8,10.5,10.7,11.7,12.3,13.1,14.2,17.2,16,16.3,17.8,18.9,19.8,20.1,20,19.9,20.4,22.1,22.3,25.2,22.3,21,20.3,21.2,21,21.9,21.6,21.1,21.5,20.9,21.6,22.3,22,22.4,22,20.5,20.9,20.5,21,19.8,19.2,19.1,19.9,20.1,17.5,18.5,18.8,19.7,18.5,17.6,16.2,17.5,17.7,17.1,17,16.6,16.3,16.8,16.5,16.1,17,17,15.9,16.2,15.9,15.6,14.5,13.2,13.5,13.3,13.3,13.5,12.8,12.6,13.4,13.1,12.2,11.7],"opacity":0.7,"type":"scatter3d","mode":"markers","name":"true values","marker":{"color":"rgba(31,119,180,1)","size":[55],"sizemode":"area","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"size":55},"error_y":{"color":"rgba(31,119,180,1)","width":55},"error_x":{"color":"rgba(31,119,180,1)","width":55},"line":{"color":"rgba(31,119,180,1)","width":55},"frame":null},{"x":[565.103203398268,568.198074372295,600.619191378067,657.063668080809,568.198074372295,642.462614040403,702.71216515873,570.388096111111,586.361606190476,604.297677950938,572.312464445553,594.594724358974,598.331087777776,602.138516349206,605.314037727272,674.262012373736,602.939431408036,608.820652216117,622.547789344544,1114.06744444445,649.249847777778,786.594826666667,623.32842095238,608.820652216117,587.338230167055,600.442839914529,615.595083593074,626.470727301587,664.967291500721,600.619191378067,600.619191378067,609.531876666666,699.959176601731,653.86764047619,653.923343275613,656.476237395383,749.124099285714,788.83206515873,744.25336489899,745.710372160894,765.129612546896,771.836374214118,720.347622332112,746.385310793651,716.261274271284,749.343039642856,842.836819603175,820.251038256741,753.803580189255,739.919676890332,832.010481507935,749.343039642856,803.833584617604,744.533604474968,816.278031855922,857.778011465201,850.434022258852,989.527372344322,850.434022258852,901.66383452381,921.963152057387,868.113430000002,827.885710642134,887.883876979686,835.152751828172,791.632604358975,834.358745875791,789.487002359308,862.462441269841,860.433261305917,821.830077092352,822.777123181817,817.944857626263,848.690656269841,890.516565981242,868.61505174603,870.241091666665,785.024068095239,877.488920642135,870.912165952378,813.674039397546,881.448354444445,699.959176601731,929.501966515152,887.883876979686,812.760792229436,940.581805418469,853.781527103174,832.640911327561,862.805419447219,877.0282397114,1521.34350376984,1452.26999811688,1171.84369357753,1281.00431333333,1196.98379888889,1318.45012119048,1261.63623246032,1261.63623246032,1210.97512833333,1446.03351045454,1389.75282563492,1390.40597912698,1533.74907315018,1504.07661643468,1605.24066092796,1561.27631079878,1435.5914115873,1591.51580464591,1504.91520930736,1352.02485111111,1525.5970491847,1995.77930952381,1596.97988900433,1429.2331726912,2574.00092668831,1443.85708699856,1526.94220666667,1555.25037673882,1420.87121296703,1460.16375186508,1724.81820658619,1363.84812634921,1646.62524650183,1443.72053428571,1676.0210697114,1015.7117581746,1363.84812634921,1498.21172606116,1418.57462904152,1559.4597148729,1671.31701714286,1530.52790476191,1557.46879833333,1488.04752532468,1515.32305571484,1483.62726523809,1488.04752532468,1565.04198357199,1596.77876690421,1499.6025310323,1526.33539261905,1563.49444249639,1752.54413373737,1529.81441476246,1851.96002968254,2476.6940086508,1740.84898126984,1654.42092843434,1559.4597148729,1637.35931446609,1626.21077931457,1604.18434010823,1649.52760674492,1575.55044849484,1555.77968125541,1724.81820658619,1986.75302112554,1692.90632230159,2042.4535932684,1739.17621261905,2111.60198259685,2099.93470444333,1862.95508837302,1914.92204892857,2075.32105253968,1986.9047334066,1670.59908789377,1859.11797107143,1932.42973978355,1815.36657860029,1765.96665399711,1717.30722618437,1873.81583570818,1596.22006805556,1972.88128691919,1828.71413626984,1687.2048947619,1904.37903393052,1890.19225839105,1879.9636728194,1642.73503103785,2104.92522093074,2419.46982309523,2251.82724825397,2286.33390587302,2408.17718412698,2540.37061536685,2491.83156857143,2584.44874,4205.15855626984,2999.42864087302,2450.42888714286,2654.0611852381,2568.68889571428,2579.39840572872,2707.66869857143,3207.92049976801,2917.57565507937,2128.76007222735,2150.99746556068,1976.82886997558,2413.34485655733,2146.94760167998,2042.4535932684,2348.76799432845,2203.03105766179,2217.15827220724,2169.22510637085,2231.36150111111,2278.19828209235,2579.17669890693,2945.19837049423,2698.27304636474,2049.03846904041,2719.75860122711,2648.2726437457,3054.24612446248,4213.15646579366,2579.17669890693,3081.04743919192,3253.31464990343,3161.84814561772,2947.95331096792,2702.18941756854,2861.16560390332,2983.65718571428,2943.79629674603,2947.95331096792,2947.06059992424,4424.06286460318,3279.51006571428,3069.65583784178,4189.30097692281,2915.69936693473,3229.30443806651,3229.30443806651,5197.39699392859,3228.15906874514,3549.61859396825,3812.96475333334,4001.04703800976,3665.33054039682,3282.79798198413,3275.40159718739,3353.43137998279,3287.56905858031,3257.16563596639,3341.83537005772,3448.28008476967,3427.60955976967,3395.10275468254,3293.14310589535,3355.96273127761,3610.92247451205,3517.4096038284,3507.17944190476,3427.60955976967,3517.4096038284,3477.76997689032,2845.1506915873,3646.71024882353,3604.60825095237,3609.6282963492,3545.94431019481,3790.5012852381,3661.42531466089,3666.89107914099,3525.16116527861,3728.20686047618,3739.87082571428,3671.08667640692,3672.87238087301,3556.19076417294,3749.64179059607,3750.3396184267,3661.1349507548,3739.1661212482,3706.99366628427,3805.42599758298,3804.55659452381,3652.36813880554,3325.11595968254,3715.34041868132,3689.44577690476,3362.71976557498,3534.36453952381,3569.83218160441,3537.81805261904,4032.83537525209,3493.46961238095,3170.57622906926,3857.99255792208,4025.35984406204,3964.76539142857,4081.26949568987,4158.95187490703,3781.76470027972,3686.27060325397,3207.92049976801,3961.20774676046,4036.86643603175,4374.3463883793,4419.90444126984,4461.34138293651,3134.85385285715,4349.35743603175,4392.94482074148,4419.87112520035,4517.40919710945,4864.82109476191,4636.9432185835,4691.17680442002,4701.13638251526,5075.36662633001,5269.20495796231,5335.07077332884,4469.10024663863,4797.15779380952,4993.21220236208,4928.23961150794,5161.38380036075,4692.48892452381,5160.44071036796,4849.56263880952,5151.2673884732,4927.47725944445,6792.64133991452,4849.56263880952,5000.36471412699,5116.60065662337,4680.70481238095,4755.89076548598,5075.36662633001,4988.24920515262,5308.54023827506,4920.52920012099,5174.780651229,5308.54023827506,5017.49731258852,5302.48323448052,5477.9198419899,5174.780651229,5230.79812438618,5251.35267525552,6570.85760166668,5178.79011621157,5000.37232896516,5174.780651229,5520.38189594573,5292.87758861306,5328.67458074448,5590.75297464647,5510.1001770635,5468.05123390026,5447.01474069264,5541.57901702742,5305.09451861883,5293.36772701409,5302.48323448052,5477.9198419899,5959.3588765873,5452.19084657426,5658.99068731297,5754.73584726552,5796.06228059885,4633.31007,4781.59960714285,5089.98297571429,4926.36060571428,5791.81143901875,6055.94947841271,6003.92956997114,5995.7627086508,5993.31815345599,5893.7368797372,6034.82686285715,6335.65143000002,6177.08237190477,6030.71337612249,6316.9985977778,6516.21310150794,6332.50596904761,6472.77023063491,6639.49150718615,6341.16358880951,6876.43220184981,6708.03880142247,6488.51176761905,6773.07011337663,6639.0843892985,6725.22323618437,6727.88446978633,6803.31623666057,6639.3754463925,6522.36596968255,6762.12705173162,6652.34190694529,6396.66107214287,6835.3634847558,6679.715480232,6876.43220184981,6766.04232718615,6787.39899308913,6695.82160484128,6788.88782642192,6824.78094603176,6886.93949756411,6631.35196341272,6340.39135902599,6094.99287925685,8031.14185402932,8219.09328435065,7300.79119172162,6662.63833594212,6645.76920016973,6950.07001476191,7520.15158309523,7693.98346945027,8221.85266333334,7743.05131853258,8256.20205518037,7601.3040851371,7679.50410377899,7749.33595211233,7711.55000782658,7711.55000782658,7722.93045558276,7880.45620297702,7915.96182154845,7882.00641261904,8478.31339119045,8066.9483895238,7844.21443658729,8027.368716398,8036.13555059606,7956.78051187423,8146.06937095237,8191.94427719166,8027.368716398,8027.368716398,7722.93045558276,7969.17885401708,7965.53632809525,7857.32038965198,7939.46716297701,8703.57649134921,8600.36688664502,9169.63976522366,7085.64454415584,8856.33076666667,8659.66997799756,8624.8294335531,8858.98294556276,8927.8052609524,8859.33934556276,9052.46694023808,8751.88869444445,9064.19035888889,9261.22061175325,9036.7893001099,9542.18259279831,9116.79884746754,8974.23063904763,9364.58106232212,9278.81297443001,9333.27323155679,7991.6558969697,9245.35149138528,9504.73558275614,9285.97994755412,9195.99006960316,9181.20111975067,8849.21316458154,9240.57433401473,9356.85272155678,9393.30886142857,9407.20523508658,9267.60930019203,8964.68952698413,9542.18259279831,9401.97946579365,9542.18259279831,9524.87482507936,9421.20209746753,9504.73558275614,9408.77941062772,9472.28583589358,9496.92642827453,9288.39147285714,6663.84572747431,7876.22602577227,9247.39564112555,9455.27593873016,9390.34631985572,8641.71793999999,8193.15750298702,8769.10802102564,8883.72352531136,9883.1721697719,9714.95490450216,10100.4411383333,8946.40507666667,10169.2649483333,10061.6436903247,10950.6379811905,10131.1203393029,10218.7425266667,10147.8128144444,10116.8122077778,10148.5135468254,10374.3477656349,10413.8765261905,10351.9730625397,10268.3630927056,10245.8666444184,10272.271673466,10289.8569465945,10274.9969092064,10325.1173133333,10454.4306644444,10444.3290489422,10539.0114403175,10661.7659333333,10421.9482917533,10488.0060394184,10460.2901856088,10436.9496945022,10591.5166157143,10552.1748579365,10508.2404277778,10589.2052466667,10509.0714553968,10762.0888066667,10797.3447,10784.470415,10928.99318,10904.3053333333,10863.3824866667,10773.6008133333,10708.3823766666,10904.84932,10930.4026276923,10839.22075,10205.642127549,8883.74024486183,11448.9466067227,11346.7109734127,11031.5807811905,11432.6169139827,11426.0217489682,11356.8299177778,11335.052597316,11354.3208577778,11437.8518356349,11519.834606746,11509.339027619,11487.289827619,11472.742647381,11499.8555819048,11673.1597461905,11720.6236719047,11827.9430061255,11888.5850961255,11904.7060794589,11889.3460390171,11942.4322888889,11955.0797888889,11773.4633228555,11801.7080790476,11665.9365133333,11406.4779577778,11472.8077723016,10770.9149411111],"y":[12.5,12.5,11.7,12.5,12.5,12.1,11.7,12.2,11.6,12.2,12,11.6,10.6,10.4,10.4,10.6,10.4,10.9,10,9.4,9.9,9.5,10,10.9,11.7,11.5,11.5,11.3,11.5,11.7,11.7,11.6,12.3,13.3,12.3,11.7,13.2,13.1,12.9,13,13.3,12.9,13.1,13.1,13.3,13,13.4,14.4,13.6,13.6,12.9,13,12.8,12.9,12.4,12.6,11.5,11.3,11.5,11.4,11.4,11.8,12,12.7,13.4,13.4,12.1,12.2,12.4,12.8,12.8,13.2,12.8,13.6,12.8,14,14,14.4,14,13.8,13,12.7,12.3,12.5,12.7,11.6,12.3,13,13.4,13.6,12.8,12.1,12.3,13.9,17,13.9,12.3,12.6,12.6,13,12.3,11.5,11.3,11.9,11.8,11.2,11.8,10.9,11.2,11.2,10.8,10.6,10.9,9.9,9.8,8.5,9.8,9.9,9.8,10.2,10.1,10.5,10.7,10.7,10.8,11,11.4,10.7,10.5,10.3,9.8,9.5,10.3,9.9,10,10.2,10,10,10.6,10.5,10.7,10.4,9.8,9.3,10,9.2,8.9,9.3,9.4,9.8,9.6,9.8,9.8,10.5,10.6,10.4,10.5,10.6,11.1,11,11.5,11.2,10.5,10.4,10.3,10.3,10.4,10.2,11.7,11.4,11.9,12.5,12.7,12,12.2,11.6,11.7,12.4,11.7,11.6,12,11.9,11.1,10.7,10.3,10.3,10.4,10.5,10,9.6,9.4,8.5,9,8.7,9,9.1,9.7,9.5,9.4,11.1,10.9,10.9,10.5,10.5,11,11.2,11.2,11.2,10.3,10.6,9.7,8.5,8.1,9.4,10.5,9,8.5,7.5,6.7,8.5,8.4,8,8,8.7,9.3,9.1,8.6,8.8,8.7,8.4,6.6,7.8,8.2,6.4,9.1,7.9,7.9,3.8,7.5,7,6.8,6.5,7,7.6,7.9,8,7.5,7.9,7.5,8.1,7.7,7.8,7.9,7.8,8.2,8,7.7,7.7,8,8.4,8.9,7.9,7.6,7.6,7.7,7.1,7.5,7.9,8,7.2,7.4,8.1,7.8,8.2,8,7.9,8,7.5,7.5,7.3,7.4,8.2,8.7,8.3,7.4,8,7.7,8.2,7.6,7.9,8.1,8.6,8.4,9.1,8.8,9.2,9.2,9.4,9.4,9.5,9.1,9.2,8.2,7.4,7.3,9.9,8.3,8.4,8.3,8.2,7.7,7.2,7,7.1,6.3,5.6,5.6,8.4,6.4,5.9,6.2,5.8,7.1,6.3,6.4,5.9,6.2,6.5,6.4,6.5,6.9,7.3,7,6.3,6.5,6.1,6.4,6.1,6.1,6.5,6,5.5,6.1,6.1,6,5,6.1,6.5,6.1,5.9,6,5.8,5.8,5.7,5.6,5.7,5.8,5.9,6.2,6,5.5,5.4,5.6,5.6,5.8,5.8,6.7,6.8,6.9,6.6,6.3,6.2,6.3,6.2,5.8,5.6,5.7,5.2,5.7,5.6,5.3,4.5,4.3,4.2,4.1,4,3.5,3.9,4.1,3.7,4.7,4.2,3.9,4.4,4.2,4.2,4.6,4.6,3.8,4,3.8,3.5,4,4.1,4.5,4.3,3.7,3.7,5,6.1,6.3,2.7,3.4,3.8,5.6,5.3,5.3,5.1,5.6,5.4,4.6,4.4,4.9,4.7,4.7,4.5,4.5,4.7,4.6,4.6,5.1,4.9,5.5,5.3,4.5,4.6,4.7,4.8,4.5,4.5,4.5,4.7,4.7,5,4.5,4.6,3.9,3.8,3.4,6.3,2.9,2.7,2.7,2.1,3,2.2,1.9,2.4,2.3,2.6,2.7,2.8,3.7,3.8,3.7,3.4,3.2,3.4,2.9,3,3,3.1,3.2,3,3,3.3,3.6,3.2,3,2.8,2.8,2.6,2.8,2.8,2.5,3,3.4,3.9,4,3.5,7.9,5.6,4.4,3.7,4.4,5.4,6.3,6.5,6.5,5.9,6.1,6.7,8.1,6.7,6,4.9,5.9,5.4,5.7,5.7,5.6,5.2,5,5.6,6,5.9,5.9,5.8,5.6,5.4,5.3,5.9,6.2,6.4,6,5.9,5.9,6.1,6.3,6.2,5.7,5.5,5.6,6.4,6.6,6.7,6.9,7,7,7.1,6.6,6.4,6.5,7.1,8.2,10.5,4.5,4.7,4.9,5.1,5.2,5.3,5.1,5.3,5.2,4.7,4.3,4.1,4.9,5,4.8,5,5.1,5.1,5.1,4.7,4.6,4.6,4.5,5,5.5,5.7,5.2,5.6],"z":[4.5,4.7,4.6,4.9,4.7,4.8,5.1,4.5,4.1,4.6,4.4,4.4,4.5,4.2,4.6,4.8,4.4,4.4,4.4,4.9,4,4,4.2,4.4,4.4,4.4,4.7,4.5,4.8,4.6,4.6,4.5,4.6,4.1,4.7,4.9,5.1,5.4,5.2,5.2,5.6,5.9,6.2,6.3,6.4,6.5,6.7,5.7,6.2,6.4,5.8,6.5,6.4,6.2,6.2,6.6,6.6,6.7,6.6,5.4,6.1,6,5.6,5.7,5.7,6.1,5.7,5.2,5.5,5,4.9,5,5.2,4.9,5.4,5.5,5.1,4.7,5,5.1,4.8,5,4.6,5.3,5.7,5,5.3,5.5,5.2,5.7,6.3,7.1,7.2,8.7,9.4,8.8,8.6,9.2,9.2,8.6,9.5,9,9,8.2,8.7,8.2,8.3,7.8,7.7,7.9,7.8,7.7,8.4,8,7.5,7.2,7.2,7.3,7.9,6.2,7.1,7,6.7,6.9,7,6.8,6.5,6.7,6.2,6.1,5.7,6,5.8,5.8,5.6,5.9,5.5,5.6,5.9,5.9,5.9,5.4,5.6,5.6,5.9,4.8,5.5,5.5,5.3,5.7,5.3,5.8,6,5.8,5.7,6.4,7,7.5,7.7,7.5,7.7,7.5,7.4,7.1,7.1,7.4,6.9,6.6,7.1,7.2,6.8,6.8,6.9,6.9,7.1,7.5,7.7,8.1,8.5,9.5,8.5,8.7,9.5,9.7,10,10.2,11.1,9.8,10.4,10.9,12.3,11.3,10.1,9.3,9.3,9.4,9.3,8.7,9.1,8.3,8.3,8.2,9.1,7.5,7.5,7.3,7.6,7.2,7.2,7.3,6.8,7.1,7.1,6.9,6.9,6.6,6.9,7.1,6.9,7.1,7,6.8,6.7,6.9,6.8,6.7,6.8,7,6.9,7.1,7.4,7,7.1,7.1,6.9,6.6,6.6,7.1,6.6,6.5,6.5,6.4,6,6.3,6.2,6,6.2,6.3,6.4,5.9,5.9,5.8,6.1,5.9,5.7,5.6,5.7,5.9,5.6,5.4,5.4,5.4,5.3,5.4,5.6,5,4.9,4.9,4.8,4.9,5.1,5.3,5.1,4.8,5.2,5.2,5.4,5.4,5.6,5.8,5.7,5.9,6,6.2,6.7,6.6,6.4,6.9,7,7.3,6.8,7.2,7.5,7.8,8.1,8.2,8.3,8.5,8.8,8.7,8.6,8.8,8.6,9,9,9.3,8.6,8.5,8.5,8.4,8.1,8.3,8.2,8.2,8.3,8,8.3,8.3,8.6,9.2,9.3,9.1,9.2,9.3,9,8.9,9.2,10,9,8.7,8,8.1,8.3,8.3,9.1,7.9,8.5,8.3,7.9,8.2,8,8.3,8.3,7.8,8.3,8.6,8.6,8.3,8.3,8.4,8.5,8.3,7.7,7.8,7.8,8.1,7.9,8.3,8,8,8.3,7.8,8.2,7.7,7.6,7.5,7.4,7,6.8,6.7,6,6.9,6.7,6.8,6.7,5.8,6.6,6.8,6.9,6.8,6.8,6.2,6.5,6.3,5.8,6.5,6,6.1,6.2,5.8,5.8,6.1,6,6.1,5.8,5.7,6,6.3,5.2,6.1,6.1,6,5.8,6.1,6.6,5.9,6.3,6,6.8,6.9,7.2,7.3,7.7,8.2,8.4,8.3,8.4,8.9,9.5,11,8.9,9,9.5,9.6,9.3,9.6,9.6,9.5,9.7,10.2,9.9,11.5,10.3,10.1,10.2,10.4,10.3,10.4,10.6,10.2,10.2,9.5,9.9,11,8.9,9.2,9.6,9.5,9.7,9.5,9.4,9.2,9.3,9,9.1,9,8.8,9.2,8.4,8.6,8.5,8.7,8.6,9.1,8.7,8.4,8.5,7.3,8,8.4,8,7.9,8.3,7.5,8.3,8.5,9.1,8.6,8.2,7.7,8.7,8.8,8.7,8.4,8.6,8.4,9,8.7,8.7,9.4,7.9,9,9.7,9.7,10.2,10.4,9.8,10.5,10.7,11.7,12.3,13.1,14.2,17.2,16,16.3,17.8,18.9,19.8,20.1,20,19.9,20.4,22.1,22.3,25.2,22.3,21,20.3,21.2,21,21.9,21.6,21.1,21.5,20.9,21.6,22.3,22,22.4,22,20.5,20.9,20.5,21,19.8,19.2,19.1,19.9,20.1,17.5,18.5,18.8,19.7,18.5,17.6,16.2,17.5,17.7,17.1,17,16.6,16.3,16.8,16.5,16.1,17,17,15.9,16.2,15.9,15.6,14.5,13.2,13.5,13.3,13.3,13.5,12.8,12.6,13.4,13.1,12.2,11.7],"opacity":0.7,"type":"scatter3d","mode":"markers","name":"modelled values","marker":{"color":"rgba(255,127,14,1)","size":[55],"sizemode":"area","line":{"color":"rgba(255,127,14,1)"}},"textfont":{"size":55},"error_y":{"color":"rgba(255,127,14,1)","width":55},"error_x":{"color":"rgba(255,127,14,1)","width":55},"line":{"color":"rgba(255,127,14,1)","width":55},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":[]}</script>
Look’s like random forrest models are pretty decent for non-linear regression!</p>
